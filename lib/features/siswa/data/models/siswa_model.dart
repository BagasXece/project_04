import 'package:project_4/features/siswa/domain/entities/siswa_entity.dart';

class SiswaModel extends SiswaEntity{
  SiswaModel({
    super.id,
    required super.nisn,
    required super.namaLengkap,
    required super.jenisKelamin,
    required super.idAgama,
    required super.namaAgama,
    required super.tempatLahir,
    required super.tanggalLahir,
    required super.noHp,
    required super.nik,
    super.idAlamat,
    super.idDusun,
    required super.jalanAlamat,
    required super.rtAlamat,
    required super.rwAlamat,
    required super.namaDusun,
    required super.namaDesa,
    required super.namaKabupaten,
    required super.namaKecamatan,
    required super.namaProvinsi,
    required super.kodePos,
    super.idOrangTua,
    super.idWali,
    required super.namaAyah,
    required super.namaIbu,
    super.namaWali,
    super.alamatOrtu,
  });

  factory SiswaModel.fromMap(Map<String, dynamic> map) => SiswaModel(
    id: map['id'] as int?,
    nisn: map['nisn'] ?? '', // <-- anti null
    namaLengkap: map['nama_lengkap'] ?? '',
    jenisKelamin: map['jenis_kelamin'] ?? '',
    idAgama: map['id_agama'] as int,
    namaAgama: map['agama_nama'] ?? '',
    tempatLahir: map['tempat_lahir'] ?? '',
    tanggalLahir: DateTime.parse(map['tanggal_lahir'] ?? DateTime.now().toIso8601String()),
    noHp: map['no_hp'] ?? '',
    nik: map['nik'] ?? '',
    idAlamat: map['id_alamat'] as int?,
    idDusun: map['id_dusun'] as int?,
    jalanAlamat: map['jalan_alamat'] ?? '',
    rtAlamat: map['rt_alamat'] as int,
    rwAlamat: map['rw_alamat'] as int,
    namaDusun: map['nama_dusun'] ?? '',
    namaDesa: map['nama_desa'] ?? '',
    namaKecamatan: map['nama_kecamatan'] ?? '',
    namaKabupaten: map['nama_kabupaten'] ?? '',
    namaProvinsi: map['nama_provinsi'] ?? '',
    kodePos: map['kode_pos'] ?? '',
    idOrangTua: map['id_orang_tua'] as int?,
    idWali: map['id_wali'] as int?,
    namaAyah: map['nama_ayah'] ?? '',
    namaIbu: map['nama_ibu'] ?? '',
    namaWali: map['nama_wali'],
    alamatOrtu: map['alamat_ortu'],
  );

  Map<String, dynamic> toMap() => {
    'nisn': nisn,
    'nama_lengkap': namaLengkap,
    'jenis_kelamin': jenisKelamin,
    'id_agama': idAgama,
    'tempat_lahir': tempatLahir,
    'tanggal_lahir': tanggalLahir.toIso8601String(),
    'no_hp': noHp,
    'nik': nik,
    'id_alamat': idAlamat,
    'id_orang_tua': idOrangTua,
    'id_wali': idWali,
  };
}
